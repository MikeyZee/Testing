{"version":3,"sources":["../../src/react/DashboardModal.test.js"],"names":["h","require","createElement","mount","configure","ReactAdapter","Uppy","jest","mock","DashboardModal","beforeAll","adapter","beforeEach","prototype","openModal","fn","closeModal","describe","it","oninstall","onuninstall","uppy","dash","expect","toHaveBeenCalled","not","unmount","instance","plugin","setProps","open"],"mappings":";;AAAA,IAAMA,IAAIC,QAAQ,OAAR,EAAiBC,aAA3B;;eAC6BD,QAAQ,QAAR,C;IAArBE,K,YAAAA,K;IAAOC,S,YAAAA,S;;AACf,IAAMC,eAAeJ,QAAQ,yBAAR,CAArB;AACA,IAAMK,OAAOL,QAAQ,SAAR,CAAb;;AAEAM,KAAKC,IAAL,CAAU,sBAAV,EAAkC;AAAA,SAAMP,QAAQ,6BAAR,CAAN;AAAA,CAAlC;;AAEA,IAAMQ,iBAAiBR,QAAQ,kBAAR,CAAvB;;AAEAS,UAAU,YAAM;AACdN,YAAU,EAAEO,SAAS,IAAIN,YAAJ,EAAX,EAAV;AACD,CAFD;;AAIAO,WAAW,YAAM;AACf,WAAcX,QAAQ,sBAAR,EAAgCY,SAA9C,EAAyD;AACvDC,eAAWP,KAAKQ,EAAL,EAD4C;AAEvDC,gBAAYT,KAAKQ,EAAL;AAF2C,GAAzD;AAID,CALD;;AAOAE,SAAS,0BAAT,EAAqC,YAAM;AACzCC,KAAG,8BAAH,EAAmC,YAAM;AACvC,QAAMC,YAAYZ,KAAKQ,EAAL,EAAlB;AACA,QAAMK,cAAcb,KAAKQ,EAAL,EAApB;AACA,QAAMM,OAAOf,MAAb;AACA,QAAMgB,OAAOnB,MACX,EAAC,cAAD;AACE,YAAMkB,IADR;AAEE,iBAAWF,SAFb;AAGE,mBAAaC;AAHf,MADW,CAAb;;AAQAG,WAAOJ,SAAP,EAAkBK,gBAAlB;AACAD,WAAOH,WAAP,EAAoBK,GAApB,CAAwBD,gBAAxB;;AAEAF,SAAKI,OAAL;;AAEAH,WAAOJ,SAAP,EAAkBK,gBAAlB;AACAD,WAAOH,WAAP,EAAoBI,gBAApB;AACD,GAnBD;;AAqBAN,KAAG,8CAAH,EAAmD,YAAM;AACvD,QAAMG,OAAOf,MAAb;AACA,QAAMgB,OAAOnB,MACX,EAAC,cAAD;AACE,YAAMkB,IADR;AAEE,YAAM;AAFR,MADW,CAAb;;AAFuD,yBAQpCC,KAAKK,QAAL,EARoC;AAAA,QAQ/CC,MAR+C,kBAQ/CA,MAR+C;;AAUvDL,WAAOK,OAAOd,SAAd,EAAyBW,GAAzB,CAA6BD,gBAA7B;;AAEAF,SAAKO,QAAL,CAAc,EAAEC,MAAM,IAAR,EAAd;;AAEAP,WAAOK,OAAOd,SAAd,EAAyBU,gBAAzB;;AAEAF,SAAKI,OAAL;AACD,GAjBD;;AAmBAR,KAAG,gDAAH,EAAqD,YAAM;AACzD,QAAMG,OAAOf,MAAb;AACA,QAAMgB,OAAOnB,MACX,EAAC,cAAD;AACE,YAAMkB,IADR;AAEE;AAFF,MADW,CAAb;;AAFyD,0BAQtCC,KAAKK,QAAL,EARsC;AAAA,QAQjDC,MARiD,mBAQjDA,MARiD;;AAUzDL,WAAOK,OAAOd,SAAd,EAAyBU,gBAAzB;AACAD,WAAOK,OAAOZ,UAAd,EAA0BS,GAA1B,CAA8BD,gBAA9B;;AAEAF,SAAKO,QAAL,CAAc,EAAEC,MAAM,KAAR,EAAd;;AAEAP,WAAOK,OAAOZ,UAAd,EAA0BQ,gBAA1B;;AAEAF,SAAKI,OAAL;AACD,GAlBD;AAmBD,CA5DD","file":"DashboardModal.test.js","sourcesContent":["const h = require('react').createElement\nconst { mount, configure } = require('enzyme')\nconst ReactAdapter = require('enzyme-adapter-react-16')\nconst Uppy = require('../core')\n\njest.mock('../plugins/Dashboard', () => require('./__mocks__/DashboardPlugin'))\n\nconst DashboardModal = require('./DashboardModal')\n\nbeforeAll(() => {\n  configure({ adapter: new ReactAdapter() })\n})\n\nbeforeEach(() => {\n  Object.assign(require('../plugins/Dashboard').prototype, {\n    openModal: jest.fn(),\n    closeModal: jest.fn()\n  })\n})\n\ndescribe('react <DashboardModal />', () => {\n  it('can be mounted and unmounted', () => {\n    const oninstall = jest.fn()\n    const onuninstall = jest.fn()\n    const uppy = Uppy()\n    const dash = mount((\n      <DashboardModal\n        uppy={uppy}\n        onInstall={oninstall}\n        onUninstall={onuninstall}\n      />\n    ))\n\n    expect(oninstall).toHaveBeenCalled()\n    expect(onuninstall).not.toHaveBeenCalled()\n\n    dash.unmount()\n\n    expect(oninstall).toHaveBeenCalled()\n    expect(onuninstall).toHaveBeenCalled()\n  })\n\n  it('opens the modal using the `open={true}` prop', () => {\n    const uppy = Uppy()\n    const dash = mount((\n      <DashboardModal\n        uppy={uppy}\n        open={false}\n      />\n    ))\n    const { plugin } = dash.instance()\n\n    expect(plugin.openModal).not.toHaveBeenCalled()\n\n    dash.setProps({ open: true })\n\n    expect(plugin.openModal).toHaveBeenCalled()\n\n    dash.unmount()\n  })\n\n  it('closes the modal using the `open={false}` prop', () => {\n    const uppy = Uppy()\n    const dash = mount((\n      <DashboardModal\n        uppy={uppy}\n        open\n      />\n    ))\n    const { plugin } = dash.instance()\n\n    expect(plugin.openModal).toHaveBeenCalled()\n    expect(plugin.closeModal).not.toHaveBeenCalled()\n\n    dash.setProps({ open: false })\n\n    expect(plugin.closeModal).toHaveBeenCalled()\n\n    dash.unmount()\n  })\n})\n"]}