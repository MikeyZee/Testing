{"version":3,"sources":["../../../src/plugins/Dashboard/index.js"],"names":["Plugin","require","Translator","dragDrop","DashboardUI","StatusBar","Informer","ThumbnailGenerator","findAllDOMElements","toArray","prettyBytes","defaultTabIcon","FOCUSABLE_ELEMENTS","TAB_KEY","ESC_KEY","module","exports","uppy","opts","id","title","type","defaultLocale","strings","selectToUpload","closeModal","upload","importFrom","dashboardWindowTitle","dashboardTitle","copyLinkToClipboardSuccess","copyLinkToClipboardFallback","copyLink","fileSource","done","name","removeFile","editFile","editing","finishEditingFile","saveChanges","cancel","localDisk","myDevice","dropPasteImport","dropPaste","browse","fileProgress","numberOfSelectedFiles","uploadAllNewFiles","emptyFolderAdded","uploadComplete","resumeUpload","pauseUpload","retryUpload","uploadXFiles","uploadXNewFiles","folderAdded","defaultOptions","target","metaFields","trigger","inline","width","height","thumbnailWidth","showLinkToFileUploadResult","showProgressDetails","hideUploadButton","hideRetryButton","hidePauseResumeCancelButtons","hideProgressAfterFinish","note","closeModalOnClickOutside","disableStatusBar","disableInformer","disableThumbnailGenerator","disablePageScrollWhenModalOpen","animateOpenClose","proudlyDisplayPoweredByUppy","onRequestCloseModal","locale","translator","i18n","translate","bind","i18nArray","translateArray","openModal","requestCloseModal","isModalOpen","addTarget","removeTarget","hideAllPanels","showPanel","getFocusableNodes","setFocusToFirstNode","maintainFocus","initEvents","onKeydown","handleClickOutside","toggleFileCard","handleDrop","handlePaste","handleInputChange","updateDashboardElWidth","render","install","plugin","pluginState","getPluginState","newTargets","targets","filter","setPluginState","callerPluginId","constructor","callerPluginName","callerPluginType","msg","log","state","slice","push","el","activePanel","nodes","querySelectorAll","Object","keys","map","key","focusableNodes","length","focus","setFocusToBrowse","browseBtn","querySelector","event","focusedItemIndex","indexOf","document","activeElement","shiftKey","preventDefault","isHidden","savedScrollPosition","window","scrollY","savedActiveElement","body","classList","add","addEventListener","rerender","getState","remove","isClosing","handler","removeEventListener","keyCode","ev","files","clipboardData","items","forEach","file","kind","blob","getAsFile","info","addFile","source","data","err","showModalTrigger","removeDragDropListener","on","removeEvents","off","dashboardEl","offsetWidth","containerWidth","fileId","fileCardFor","capabilities","newFiles","progress","uploadStarted","inProgressFiles","isPaused","inProgressFilesArray","totalSize","totalUploadedSize","bytesTotal","bytesUploaded","attachRenderFunctionToTarget","getPlugin","icon","isSupported","acquirers","progressindicators","startUpload","catch","stack","message","cancelUpload","fileID","emit","saveFileCard","meta","setFileMeta","modal","totalFileCount","totalProgress","autoProceed","resumableUploads","bundled","pauseResume","currentWidth","isWide","isTargetDOMEl","allowedFileTypes","restrictions","maxNumberOfFiles","discoverProviderPlugins","iteratePlugins","showFileCard","mount","plugins","pluginID","use","hideAfterFinish","uninstall","informer","removePlugin","statusBar","thumbnail","unmount"],"mappings":"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","file":"index.js","sourcesContent":["const Plugin = require('../../core/Plugin')\nconst Translator = require('../../core/Translator')\nconst dragDrop = require('drag-drop')\nconst DashboardUI = require('./Dashboard')\nconst StatusBar = require('../StatusBar')\nconst Informer = require('../Informer')\nconst ThumbnailGenerator = require('../ThumbnailGenerator')\nconst { findAllDOMElements, toArray } = require('../../core/Utils')\nconst prettyBytes = require('prettier-bytes')\nconst { defaultTabIcon } = require('./icons')\n\n// Some code for managing focus was adopted from https://github.com/ghosh/micromodal\n// MIT licence, https://github.com/ghosh/micromodal/blob/master/LICENSE.md\n// Copyright (c) 2017 Indrashish Ghosh\nconst FOCUSABLE_ELEMENTS = [\n  'a[href]:not([tabindex^=\"-\"]):not([inert]):not([aria-hidden])',\n  'area[href]:not([tabindex^=\"-\"]):not([inert]):not([aria-hidden])',\n  'input:not([disabled]):not([inert]):not([aria-hidden])',\n  'select:not([disabled]):not([inert]):not([aria-hidden])',\n  'textarea:not([disabled]):not([inert]):not([aria-hidden])',\n  'button:not([disabled]):not([inert]):not([aria-hidden])',\n  'iframe:not([tabindex^=\"-\"]):not([inert]):not([aria-hidden])',\n  'object:not([tabindex^=\"-\"]):not([inert]):not([aria-hidden])',\n  'embed:not([tabindex^=\"-\"]):not([inert]):not([aria-hidden])',\n  '[contenteditable]:not([tabindex^=\"-\"]):not([inert]):not([aria-hidden])',\n  '[tabindex]:not([tabindex^=\"-\"]):not([inert]):not([aria-hidden])'\n]\n\nconst TAB_KEY = 9\nconst ESC_KEY = 27\n\n/**\n * Dashboard UI with previews, metadata editing, tabs for various services and more\n */\nmodule.exports = class Dashboard extends Plugin {\n  constructor (uppy, opts) {\n    super(uppy, opts)\n    this.id = this.opts.id || 'Dashboard'\n    this.title = 'Dashboard'\n    this.type = 'orchestrator'\n\n    const defaultLocale = {\n      strings: {\n        selectToUpload: 'Select files to upload',\n        closeModal: 'Close Modal',\n        upload: 'Upload',\n        importFrom: 'Import from %{name}',\n        dashboardWindowTitle: 'Uppy Dashboard Window (Press escape to close)',\n        dashboardTitle: 'Uppy Dashboard',\n        copyLinkToClipboardSuccess: 'Link copied to clipboard',\n        copyLinkToClipboardFallback: 'Copy the URL below',\n        copyLink: 'Copy link',\n        fileSource: 'File source: %{name}',\n        done: 'Done',\n        name: 'Name',\n        removeFile: 'Remove file',\n        editFile: 'Edit file',\n        editing: 'Editing %{file}',\n        finishEditingFile: 'Finish editing file',\n        saveChanges: 'Save changes',\n        cancel: 'Cancel',\n        localDisk: 'Local Disk',\n        myDevice: 'My Device',\n        dropPasteImport: 'Drop files here, paste, import from one of the locations above or %{browse}',\n        dropPaste: 'Drop files here, paste or %{browse}',\n        browse: 'browse',\n        fileProgress: 'File progress: upload speed and ETA',\n        numberOfSelectedFiles: 'Number of selected files',\n        uploadAllNewFiles: 'Upload all new files',\n        emptyFolderAdded: 'No files were added from empty folder',\n        uploadComplete: 'Upload complete',\n        resumeUpload: 'Resume upload',\n        pauseUpload: 'Pause upload',\n        retryUpload: 'Retry upload',\n        uploadXFiles: {\n          0: 'Upload %{smart_count} file',\n          1: 'Upload %{smart_count} files'\n        },\n        uploadXNewFiles: {\n          0: 'Upload +%{smart_count} file',\n          1: 'Upload +%{smart_count} files'\n        },\n        folderAdded: {\n          0: 'Added %{smart_count} file from %{folder}',\n          1: 'Added %{smart_count} files from %{folder}'\n        }\n      }\n    }\n\n    // set default options\n    const defaultOptions = {\n      target: 'body',\n      metaFields: [],\n      trigger: '#uppy-select-files',\n      inline: false,\n      width: 750,\n      height: 550,\n      thumbnailWidth: 280,\n      defaultTabIcon: defaultTabIcon,\n      showLinkToFileUploadResult: true,\n      showProgressDetails: false,\n      hideUploadButton: false,\n      hideRetryButton: false,\n      hidePauseResumeCancelButtons: false,\n      hideProgressAfterFinish: false,\n      note: null,\n      closeModalOnClickOutside: false,\n      disableStatusBar: false,\n      disableInformer: false,\n      disableThumbnailGenerator: false,\n      disablePageScrollWhenModalOpen: true,\n      animateOpenClose: true,\n      proudlyDisplayPoweredByUppy: true,\n      onRequestCloseModal: () => this.closeModal(),\n      locale: defaultLocale\n    }\n\n    // merge default options with the ones set by user\n    this.opts = Object.assign({}, defaultOptions, opts)\n\n    this.locale = Object.assign({}, defaultLocale, this.opts.locale)\n    this.locale.strings = Object.assign({}, defaultLocale.strings, this.opts.locale.strings)\n\n    this.translator = new Translator({locale: this.locale})\n    this.i18n = this.translator.translate.bind(this.translator)\n    this.i18nArray = this.translator.translateArray.bind(this.translator)\n\n    this.openModal = this.openModal.bind(this)\n    this.closeModal = this.closeModal.bind(this)\n    this.requestCloseModal = this.requestCloseModal.bind(this)\n    this.isModalOpen = this.isModalOpen.bind(this)\n\n    this.addTarget = this.addTarget.bind(this)\n    this.removeTarget = this.removeTarget.bind(this)\n    this.hideAllPanels = this.hideAllPanels.bind(this)\n    this.showPanel = this.showPanel.bind(this)\n    this.getFocusableNodes = this.getFocusableNodes.bind(this)\n    this.setFocusToFirstNode = this.setFocusToFirstNode.bind(this)\n    this.maintainFocus = this.maintainFocus.bind(this)\n\n    this.initEvents = this.initEvents.bind(this)\n    this.onKeydown = this.onKeydown.bind(this)\n    this.handleClickOutside = this.handleClickOutside.bind(this)\n    this.toggleFileCard = this.toggleFileCard.bind(this)\n    this.handleDrop = this.handleDrop.bind(this)\n    this.handlePaste = this.handlePaste.bind(this)\n    this.handleInputChange = this.handleInputChange.bind(this)\n    this.updateDashboardElWidth = this.updateDashboardElWidth.bind(this)\n    this.render = this.render.bind(this)\n    this.install = this.install.bind(this)\n  }\n\n  removeTarget (plugin) {\n    const pluginState = this.getPluginState()\n    // filter out the one we want to remove\n    const newTargets = pluginState.targets.filter(target => target.id !== plugin.id)\n\n    this.setPluginState({\n      targets: newTargets\n    })\n  }\n\n  addTarget (plugin) {\n    const callerPluginId = plugin.id || plugin.constructor.name\n    const callerPluginName = plugin.title || callerPluginId\n    const callerPluginType = plugin.type\n\n    if (callerPluginType !== 'acquirer' &&\n        callerPluginType !== 'progressindicator' &&\n        callerPluginType !== 'presenter') {\n      let msg = 'Dashboard: Modal can only be used by plugins of types: acquirer, progressindicator, presenter'\n      this.uppy.log(msg)\n      return\n    }\n\n    const target = {\n      id: callerPluginId,\n      name: callerPluginName,\n      type: callerPluginType\n    }\n\n    const state = this.getPluginState()\n    const newTargets = state.targets.slice()\n    newTargets.push(target)\n\n    this.setPluginState({\n      targets: newTargets\n    })\n\n    return this.el\n  }\n\n  hideAllPanels () {\n    this.setPluginState({\n      activePanel: false\n    })\n  }\n\n  showPanel (id) {\n    const { targets } = this.getPluginState()\n\n    const activePanel = targets.filter((target) => {\n      return target.type === 'acquirer' && target.id === id\n    })[0]\n\n    this.setPluginState({\n      activePanel: activePanel\n    })\n  }\n\n  requestCloseModal () {\n    if (this.opts.onRequestCloseModal) {\n      return this.opts.onRequestCloseModal()\n    } else {\n      this.closeModal()\n    }\n  }\n\n  getFocusableNodes () {\n    const nodes = this.el.querySelectorAll(FOCUSABLE_ELEMENTS)\n    return Object.keys(nodes).map((key) => nodes[key])\n  }\n\n  setFocusToFirstNode () {\n    const focusableNodes = this.getFocusableNodes()\n    if (focusableNodes.length) focusableNodes[0].focus()\n  }\n\n  setFocusToBrowse () {\n    const browseBtn = this.el.querySelector('.uppy-Dashboard-browse')\n    if (browseBtn) browseBtn.focus()\n  }\n\n  maintainFocus (event) {\n    var focusableNodes = this.getFocusableNodes()\n    var focusedItemIndex = focusableNodes.indexOf(document.activeElement)\n\n    if (event.shiftKey && focusedItemIndex === 0) {\n      focusableNodes[focusableNodes.length - 1].focus()\n      event.preventDefault()\n    }\n\n    if (!event.shiftKey && focusedItemIndex === focusableNodes.length - 1) {\n      focusableNodes[0].focus()\n      event.preventDefault()\n    }\n  }\n\n  openModal () {\n    this.setPluginState({\n      isHidden: false\n    })\n\n    // save scroll position\n    this.savedScrollPosition = window.scrollY\n    // save active element, so we can restore focus when modal is closed\n    this.savedActiveElement = document.activeElement\n\n    if (this.opts.disablePageScrollWhenModalOpen) {\n      document.body.classList.add('uppy-Dashboard-isFixed')\n    }\n\n    // handle ESC and TAB keys in modal dialog\n    document.addEventListener('keydown', this.onKeydown)\n\n    this.rerender(this.uppy.getState())\n    this.updateDashboardElWidth()\n    this.setFocusToBrowse()\n  }\n\n  closeModal () {\n    if (this.opts.disablePageScrollWhenModalOpen) {\n      document.body.classList.remove('uppy-Dashboard-isFixed')\n    }\n\n    if (this.opts.animateOpenClose) {\n      this.setPluginState({\n        isClosing: true\n      })\n      const handler = () => {\n        this.setPluginState({\n          isHidden: true,\n          isClosing: false\n        })\n        this.el.removeEventListener('animationend', handler, false)\n      }\n      this.el.addEventListener('animationend', handler, false)\n    } else {\n      this.setPluginState({\n        isHidden: true\n      })\n    }\n\n    // handle ESC and TAB keys in modal dialog\n    document.removeEventListener('keydown', this.onKeydown)\n\n    this.savedActiveElement.focus()\n  }\n\n  isModalOpen () {\n    return !this.getPluginState().isHidden || false\n  }\n\n  onKeydown (event) {\n    // close modal on esc key press\n    if (event.keyCode === ESC_KEY) this.requestCloseModal(event)\n    // maintainFocus on tab key press\n    if (event.keyCode === TAB_KEY) this.maintainFocus(event)\n  }\n\n  handleClickOutside () {\n    if (this.opts.closeModalOnClickOutside) this.requestCloseModal()\n  }\n\n  handlePaste (ev) {\n    const files = toArray(ev.clipboardData.items)\n    files.forEach((file) => {\n      if (file.kind !== 'file') return\n\n      const blob = file.getAsFile()\n      if (!blob) {\n        this.uppy.log('[Dashboard] File pasted, but the file blob is empty')\n        this.uppy.info('Error pasting file', 'error')\n        return\n      }\n      this.uppy.log('[Dashboard] File pasted')\n      try {\n        this.uppy.addFile({\n          source: this.id,\n          name: file.name,\n          type: file.type,\n          data: blob\n        })\n      } catch (err) {\n        // Nothing, restriction errors handled in Core\n      }\n    })\n  }\n\n  handleInputChange (ev) {\n    ev.preventDefault()\n    const files = toArray(ev.target.files)\n\n    files.forEach((file) => {\n      try {\n        this.uppy.addFile({\n          source: this.id,\n          name: file.name,\n          type: file.type,\n          data: file\n        })\n      } catch (err) {\n        // Nothing, restriction errors handled in Core\n      }\n    })\n  }\n\n  initEvents () {\n    // Modal open button\n    const showModalTrigger = findAllDOMElements(this.opts.trigger)\n    if (!this.opts.inline && showModalTrigger) {\n      showModalTrigger.forEach(trigger => trigger.addEventListener('click', this.openModal))\n    }\n\n    if (!this.opts.inline && !showModalTrigger) {\n      this.uppy.log('Dashboard modal trigger not found. Make sure `trigger` is set in Dashboard options unless you are planning to call openModal() method yourself')\n    }\n\n    // Drag Drop\n    this.removeDragDropListener = dragDrop(this.el, (files) => {\n      this.handleDrop(files)\n    })\n\n    this.updateDashboardElWidth()\n    window.addEventListener('resize', this.updateDashboardElWidth)\n\n    this.uppy.on('plugin-remove', this.removeTarget)\n  }\n\n  removeEvents () {\n    const showModalTrigger = findAllDOMElements(this.opts.trigger)\n    if (!this.opts.inline && showModalTrigger) {\n      showModalTrigger.forEach(trigger => trigger.removeEventListener('click', this.openModal))\n    }\n\n    this.removeDragDropListener()\n    window.removeEventListener('resize', this.updateDashboardElWidth)\n\n    this.uppy.off('plugin-remove', this.removeTarget)\n  }\n\n  updateDashboardElWidth () {\n    const dashboardEl = this.el.querySelector('.uppy-Dashboard-inner')\n    this.uppy.log(`Dashboard width: ${dashboardEl.offsetWidth}`)\n\n    this.setPluginState({\n      containerWidth: dashboardEl.offsetWidth\n    })\n  }\n\n  toggleFileCard (fileId) {\n    this.setPluginState({\n      fileCardFor: fileId || false\n    })\n  }\n\n  handleDrop (files) {\n    this.uppy.log('[Dashboard] Files were dropped')\n\n    files.forEach((file) => {\n      try {\n        this.uppy.addFile({\n          source: this.id,\n          name: file.name,\n          type: file.type,\n          data: file\n        })\n      } catch (err) {\n        // Nothing, restriction errors handled in Core\n      }\n    })\n  }\n\n  render (state) {\n    const pluginState = this.getPluginState()\n    const { files, capabilities } = state\n\n    const newFiles = Object.keys(files).filter((file) => {\n      return !files[file].progress.uploadStarted\n    })\n    const inProgressFiles = Object.keys(files).filter((file) => {\n      return !files[file].progress.uploadComplete &&\n             files[file].progress.uploadStarted &&\n             !files[file].isPaused\n    })\n\n    let inProgressFilesArray = []\n    inProgressFiles.forEach((file) => {\n      inProgressFilesArray.push(files[file])\n    })\n\n    let totalSize = 0\n    let totalUploadedSize = 0\n    inProgressFilesArray.forEach((file) => {\n      totalSize = totalSize + (file.progress.bytesTotal || 0)\n      totalUploadedSize = totalUploadedSize + (file.progress.bytesUploaded || 0)\n    })\n    totalSize = prettyBytes(totalSize)\n    totalUploadedSize = prettyBytes(totalUploadedSize)\n\n    const attachRenderFunctionToTarget = (target) => {\n      const plugin = this.uppy.getPlugin(target.id)\n      return Object.assign({}, target, {\n        icon: plugin.icon || this.opts.defaultTabIcon,\n        render: plugin.render\n      })\n    }\n\n    const isSupported = (target) => {\n      const plugin = this.uppy.getPlugin(target.id)\n      // If the plugin does not provide a `supported` check, assume the plugin works everywhere.\n      if (typeof plugin.isSupported !== 'function') {\n        return true\n      }\n      return plugin.isSupported()\n    }\n\n    const acquirers = pluginState.targets\n      .filter(target => target.type === 'acquirer' && isSupported(target))\n      .map(attachRenderFunctionToTarget)\n\n    const progressindicators = pluginState.targets\n      .filter(target => target.type === 'progressindicator')\n      .map(attachRenderFunctionToTarget)\n\n    const startUpload = (ev) => {\n      this.uppy.upload().catch((err) => {\n        // Log error.\n        this.uppy.log(err.stack || err.message || err)\n      })\n    }\n\n    const cancelUpload = (fileID) => {\n      this.uppy.emit('upload-cancel', fileID)\n      this.uppy.removeFile(fileID)\n    }\n\n    const saveFileCard = (meta, fileID) => {\n      this.uppy.setFileMeta(fileID, meta)\n      this.toggleFileCard()\n    }\n\n    return DashboardUI({\n      state: state,\n      modal: pluginState,\n      newFiles: newFiles,\n      files: files,\n      totalFileCount: Object.keys(files).length,\n      totalProgress: state.totalProgress,\n      acquirers: acquirers,\n      activePanel: pluginState.activePanel,\n      animateOpenClose: this.opts.animateOpenClose,\n      isClosing: pluginState.isClosing,\n      getPlugin: this.uppy.getPlugin,\n      progressindicators: progressindicators,\n      autoProceed: this.uppy.opts.autoProceed,\n      hideUploadButton: this.opts.hideUploadButton,\n      hideRetryButton: this.opts.hideRetryButton,\n      hidePauseResumeCancelButtons: this.opts.hidePauseResumeCancelButtons,\n      id: this.id,\n      closeModal: this.requestCloseModal,\n      handleClickOutside: this.handleClickOutside,\n      handleInputChange: this.handleInputChange,\n      handlePaste: this.handlePaste,\n      inline: this.opts.inline,\n      showPanel: this.showPanel,\n      hideAllPanels: this.hideAllPanels,\n      log: this.uppy.log,\n      i18n: this.i18n,\n      i18nArray: this.i18nArray,\n      addFile: this.uppy.addFile,\n      removeFile: this.uppy.removeFile,\n      info: this.uppy.info,\n      note: this.opts.note,\n      metaFields: pluginState.metaFields,\n      resumableUploads: capabilities.resumableUploads || false,\n      bundled: capabilities.bundled || false,\n      startUpload: startUpload,\n      pauseUpload: this.uppy.pauseResume,\n      retryUpload: this.uppy.retryUpload,\n      cancelUpload: cancelUpload,\n      fileCardFor: pluginState.fileCardFor,\n      toggleFileCard: this.toggleFileCard,\n      saveFileCard: saveFileCard,\n      updateDashboardElWidth: this.updateDashboardElWidth,\n      width: this.opts.width,\n      height: this.opts.height,\n      showLinkToFileUploadResult: this.opts.showLinkToFileUploadResult,\n      proudlyDisplayPoweredByUppy: this.opts.proudlyDisplayPoweredByUppy,\n      currentWidth: pluginState.containerWidth,\n      isWide: pluginState.containerWidth > 400,\n      isTargetDOMEl: this.isTargetDOMEl,\n      allowedFileTypes: this.uppy.opts.restrictions.allowedFileTypes,\n      maxNumberOfFiles: this.uppy.opts.restrictions.maxNumberOfFiles\n    })\n  }\n\n  discoverProviderPlugins () {\n    this.uppy.iteratePlugins((plugin) => {\n      if (plugin && !plugin.target && plugin.opts && plugin.opts.target === this.constructor) {\n        this.addTarget(plugin)\n      }\n    })\n  }\n\n  install () {\n    // Set default state for Dashboard\n    this.setPluginState({\n      isHidden: true,\n      showFileCard: false,\n      activePanel: false,\n      metaFields: this.opts.metaFields,\n      targets: []\n    })\n\n    const target = this.opts.target\n    if (target) {\n      this.mount(target, this)\n    }\n\n    const plugins = this.opts.plugins || []\n    plugins.forEach((pluginID) => {\n      const plugin = this.uppy.getPlugin(pluginID)\n      if (plugin) plugin.mount(this, plugin)\n    })\n\n    if (!this.opts.disableStatusBar) {\n      this.uppy.use(StatusBar, {\n        id: `${this.id}:StatusBar`,\n        target: this,\n        hideUploadButton: this.opts.hideUploadButton,\n        hideRetryButton: this.opts.hideRetryButton,\n        hidePauseResumeCancelButtons: this.opts.hidePauseResumeCancelButtons,\n        showProgressDetails: this.opts.showProgressDetails,\n        hideAfterFinish: this.opts.hideProgressAfterFinish,\n        locale: this.opts.locale\n      })\n    }\n\n    if (!this.opts.disableInformer) {\n      this.uppy.use(Informer, {\n        id: `${this.id}:Informer`,\n        target: this\n      })\n    }\n\n    if (!this.opts.disableThumbnailGenerator) {\n      this.uppy.use(ThumbnailGenerator, {\n        id: `${this.id}:ThumbnailGenerator`,\n        thumbnailWidth: this.opts.thumbnailWidth\n      })\n    }\n\n    this.discoverProviderPlugins()\n\n    this.initEvents()\n  }\n\n  uninstall () {\n    if (!this.opts.disableInformer) {\n      const informer = this.uppy.getPlugin(`${this.id}:Informer`)\n      // Checking if this plugin exists, in case it was removed by uppy-core\n      // before the Dashboard was.\n      if (informer) this.uppy.removePlugin(informer)\n    }\n\n    if (!this.opts.disableStatusBar) {\n      const statusBar = this.uppy.getPlugin(`${this.id}:StatusBar`)\n      if (statusBar) this.uppy.removePlugin(statusBar)\n    }\n\n    if (!this.opts.disableThumbnailGenerator) {\n      const thumbnail = this.uppy.getPlugin(`${this.id}:ThumbnailGenerator`)\n      if (thumbnail) this.uppy.removePlugin(thumbnail)\n    }\n\n    const plugins = this.opts.plugins || []\n    plugins.forEach((pluginID) => {\n      const plugin = this.uppy.getPlugin(pluginID)\n      if (plugin) plugin.unmount()\n    })\n\n    this.unmount()\n    this.removeEvents()\n  }\n}\n"]}